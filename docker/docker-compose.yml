version: '3.8'

services:
  pf-compression-pwa:
    build:
      context: ..
      dockerfile: docker/Dockerfile
      args:
        - PROJECT_MODE=${PROJECT_MODE:-serve}
    ports:
      - "${SERVICE_PORT:-2338}:2338"
    restart: unless-stopped
    volumes:
      - ../app:/src/app
      - ../build:/src/build
      - ../dist:/src/dist
      - /src/app/ts-pwalib/node_modules
    environment:
      - NODE_ENV=${NODE_ENV:-production}
      - PROJECT_MODE=${PROJECT_MODE:-serve}
      - SERVICE_PORT=${SERVICE_PORT:-2338}
      - ENABLE_HTTPS=${ENABLE_HTTPS:-false}
      - ENABLE_COMPRESSION=${ENABLE_COMPRESSION:-true}
      - LOG_LEVEL=${LOG_LEVEL:-info}
